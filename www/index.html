<!DOCTYPE html>
<html>
    <head>
        <title>California's Prison Industry: Educational or Exploitative?</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    </head>
    <body>
    <div id="scroll-wrapper">
        <div class="scroll current">
        <h1>California's Prison Industry: Educational or Exploitative?</h1>
        </div>
        <div class="scroll">
        <p>California's  Prison Industry Authority (CALPIA) offers opportunities for between 5,000 to 7,000 of its roughly 100,000 inmates
            in state facilities to work various jobs. Positions range from internal roles cleaning prisons or running mess halls
            to workshops that produce and sell goods like furniture, baked goods, shoes, license plates, and other domestic
            products. This report will focus on jobs that CALPIA categorizes as manufacturing, service, or agricultural work - 
            those whose products may end up in the homes of Californians daily.
        </p>
        </div>
        <div class="scroll">
       <svg id="first_chart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="marks" width="592" height="203" viewBox="0 0 592 203"><rect width="592" height="203" fill="#EEE5E9"/><g fill="none" stroke-miterlimit="10" transform="translate(180,23)"><g class="mark-group role-frame root" role="graphics-object" aria-roledescription="group mark container"><g transform="translate(0,0)"><path class="background" aria-hidden="true" d="M0,0h0v0h0Z"/><g><g class="mark-group role-scope concat_0_group" role="graphics-object" aria-roledescription="group mark container"><g transform="translate(0,0)"><path class="background" aria-hidden="true" d="M0.5,0.5h300v100h-300Z" stroke="#ddd"/><g><g class="mark-group role-axis" aria-hidden="true"><g transform="translate(0.5,100.5)"><path class="background" aria-hidden="true" d="M0,0h0v0h0Z" pointer-events="none"/><g><g class="mark-rule role-axis-grid" pointer-events="none"><line transform="translate(0,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/><line transform="translate(50,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/><line transform="translate(100,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/><line transform="translate(150,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/><line transform="translate(200,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/><line transform="translate(250,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/><line transform="translate(300,0)" x2="0" y2="-100" stroke="#ddd" stroke-width="1" opacity="1"/></g></g><path class="foreground" aria-hidden="true" d="" pointer-events="none" display="none"/></g></g><g class="mark-group role-axis" role="graphics-symbol" aria-roledescription="axis" aria-label="X-axis titled 'Worker Count' for a linear scale with values from 0 to 6,000"><g transform="translate(0.5,100.5)"><path class="background" aria-hidden="true" d="M0,0h0v0h0Z" pointer-events="none"/><g><g class="mark-rule role-axis-tick" pointer-events="none"><line transform="translate(0,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(50,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(100,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(150,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(200,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(250,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(300,0)" x2="0" y2="5" stroke="#888" stroke-width="1" opacity="1"/></g><g class="mark-text role-axis-label" pointer-events="none"><text text-anchor="start" transform="translate(0,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">0</text><text text-anchor="middle" transform="translate(50,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">1,000</text><text text-anchor="middle" transform="translate(100,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">2,000</text><text text-anchor="middle" transform="translate(150,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">3,000</text><text text-anchor="middle" transform="translate(200,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">4,000</text><text text-anchor="middle" transform="translate(250,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">5,000</text><text text-anchor="end" transform="translate(300,15)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">6,000</text></g><g class="mark-rule role-axis-domain" pointer-events="none"><line transform="translate(0,0)" x2="300" y2="0" stroke="#888" stroke-width="1" opacity="1"/></g><g class="mark-text role-axis-title" pointer-events="none"><text text-anchor="middle" transform="translate(150,30)" font-family="sans-serif" font-size="11px" font-weight="bold" fill="#000" opacity="1">Worker Count</text></g></g><path class="foreground" aria-hidden="true" d="" pointer-events="none" display="none"/></g></g><g class="mark-group role-axis" role="graphics-symbol" aria-roledescription="axis" aria-label="Y-axis titled 'Employer' for a discrete scale with 5 values: SpaceX, Costco, Californa Prison Industry Authority, Adventist Health, Warner Bros. Entertainment"><g transform="translate(0.5,0.5)"><path class="background" aria-hidden="true" d="M0,0h0v0h0Z" pointer-events="none"/><g><g class="mark-rule role-axis-tick" pointer-events="none"><line transform="translate(0,10)" x2="-5" y2="0" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(0,30)" x2="-5" y2="0" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(0,50)" x2="-5" y2="0" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(0,70)" x2="-5" y2="0" stroke="#888" stroke-width="1" opacity="1"/><line transform="translate(0,90)" x2="-5" y2="0" stroke="#888" stroke-width="1" opacity="1"/></g><g class="mark-text role-axis-label" pointer-events="none"><text text-anchor="end" transform="translate(-7,12.5)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">SpaceX</text><text text-anchor="end" transform="translate(-7,32.5)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">Costco</text><text text-anchor="end" transform="translate(-7,52.5)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">Californa Prison Industry Authority</text><text text-anchor="end" transform="translate(-7,72.5)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">Adventist Health</text><text text-anchor="end" transform="translate(-7,92.5)" font-family="sans-serif" font-size="10px" fill="#000" opacity="1">Warner Bros. Entertainment</text></g><g class="mark-rule role-axis-domain" pointer-events="none"><line transform="translate(0,0)" x2="0" y2="100" stroke="#888" stroke-width="1" opacity="1"/></g><g class="mark-text role-axis-title" pointer-events="none"><text text-anchor="middle" transform="translate(-162.181640625,50) rotate(-90) translate(0,-2)" font-family="sans-serif" font-size="11px" font-weight="bold" fill="#000" opacity="1">Employer</text></g></g><path class="foreground" aria-hidden="true" d="" pointer-events="none" display="none"/></g></g><g class="mark-rect role-mark concat_0_marks" role="graphics-object" aria-roledescription="rect mark container"><path aria-label="Worker Count: 4687; Employer: Californa Prison Industry Authority" role="graphics-symbol" aria-roledescription="bar" d="M0,41h234.35v18h-234.35Z" fill="#CF5C36" stroke="#000000"/><path aria-label="Worker Count: 4100; Employer: Warner Bros. Entertainment" role="graphics-symbol" aria-roledescription="bar" d="M0,81h205v18h-205Z" fill="#CF5C36" stroke="#000000"/><path aria-label="Worker Count: 5500; Employer: Costco" role="graphics-symbol" aria-roledescription="bar" d="M0,21h275v18h-275Z" fill="#CF5C36" stroke="#000000"/><path aria-label="Worker Count: 4600; Employer: Adventist Health" role="graphics-symbol" aria-roledescription="bar" d="M0,61h230.00000000000003v18h-230.00000000000003Z" fill="#CF5C36" stroke="#000000"/><path aria-label="Worker Count: 6000; Employer: SpaceX" role="graphics-symbol" aria-roledescription="bar" d="M0,1h300v18h-300Z" fill="#CF5C36" stroke="#000000"/></g><g class="mark-group role-title"><g transform="translate(150,-17)"><path class="background" aria-hidden="true" d="M0,0h0v0h0Z" pointer-events="none"/><g><g class="mark-text role-title-text" role="graphics-symbol" aria-roledescription="title" aria-label="Title text 'CALPIA Employment Compared to Los Angeles County Employment'" pointer-events="none"><text text-anchor="middle" transform="translate(0,10)" font-family="sans-serif" font-size="13px" font-weight="bold" fill="#000" opacity="1">CALPIA Employment Compared to Los Angeles County Employment</text></g></g><path class="foreground" aria-hidden="true" d="" pointer-events="none" display="none"/></g></g></g><path class="foreground" aria-hidden="true" d="" display="none"/></g></g><g class="mark-group role-scope concat_1_group" role="graphics-object" aria-roledescription="group mark container"><g transform="translate(0,153)"><path class="background" aria-hidden="true" d="M0,0h20v20h-20Z"/><g><g class="mark-text role-mark concat_1_marks" role="graphics-object" aria-roledescription="text mark container"><text aria-label="text: CALPIA Data as of 2023, LA Data as of 2022Sources: California Prison Industry Authority,,Los Angeles Almanac" role="graphics-symbol" aria-roledescription="text mark" text-anchor="start" transform="translate(10,8)" font-family="sans-serif" font-size="10px" fill="black"><tspan>CALPIA Data as of 2023, LA Data as of 2022Sources: California Prison Industry Authority,</tspan><tspan x="0" dy="12">Los Angeles Almanac</tspan></text></g></g><path class="foreground" aria-hidden="true" d="" display="none"/></g></g></g><path class="foreground" aria-hidden="true" d="" display="none"/></g></g></g></svg>
        </div>
    </div>
    <script>

    const scrolls = document.querySelectorAll(".scroll");


    const observerOptions = {
        root: null,       
        threshold: 0.5,   
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
        if (entry.isIntersecting) {
            scrolls.forEach(step => step.classList.remove("current"));
            entry.target.classList.add("current");
        }
        });
    }, observerOptions);

    scrolls.forEach(scrolls => observer.observe(scrolls));

    const svg = d3.select("#first_chart");
    const bars = svg.selectAll("path[aria-roledescription='bar']");

    bars.each(function () {
        this.dataset.originalD = this.getAttribute("d");
    });

    bars.attr("d", function () {
        const original = this.dataset.originalD;
        const parts = original.match(/M0,([0-9.]+)h([0-9.]+)v([0-9.]+)/);

        const y = parseFloat(parts[1]);
        const height = parseFloat(parts[3]);

        return `M0,${y}h0v${height}h0Z`;
    });

    function animateBars() {
        bars.transition()
            .duration(1200)
            .attrTween("d", function () {
                const original = this.dataset.originalD;
                const parts = original.match(/M0,([0-9.]+)h([0-9.]+)v([0-9.]+)/);

                const y = parseFloat(parts[1]);
                const finalWidth = parseFloat(parts[2]);
                const height = parseFloat(parts[3]);

                return function (t) {
                    const w = t * finalWidth;
                    return `M0,${y}h${w}v${height}h-${w}Z`;
                };
            });
    }

    const chartObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateBars();
            }
        });
    }, { threshold: 0.5 });

    chartObserver.observe(document.querySelector("#first_chart"));

    </script>
    </body>
</html>


